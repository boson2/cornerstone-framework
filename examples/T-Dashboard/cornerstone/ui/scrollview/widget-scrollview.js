/*
    Cornerstone Framework v0.9.1

    COPYRIGHT(C) 2012 BY SKTELECOM CO., LTD. ALL RIGHTS RESERVED.
    Released under the Apache License, Version 2.0
*/
!function(a,b,c){"function"==typeof define&&define.amd?define(["backbone","underscore","jquery"],function(d,e,f){return c(f,a,b),d.View.extend({render:function(){return this.$el.featuredScrollView(this.options),this}})}):c(a.jQuery,a,b)}(this,document,function(a){var b,c,d,e,f="featuredScrollView",g=function(b,c){return this.defaultOptions={scrollbars:!0,mouseWheel:!0,interactiveScrollbars:!0,formFields:void 0,pullDownID:void 0,pullUpID:void 0,pullDownAction:void 0,pullUpAction:void 0},this.options=c=a.extend(!0,this.defaultOptions,c),this.$el=a(b),this.formCheck(),this.pullToRefresh(),this.iscroll=new iScroll(this.$el[0],c),this};g.prototype.refresh=function(){this.iscroll.refresh()},g.prototype.formCheck=function(){if(!(!a.isEmptyObject(this.options)&&a.isArray(this.options.formFields)&&this.options.formFields.length>0))return!1;var b=this,c=function(c){for(var d=c.target,e=!0;1!=d.nodeType;)d=d.parentNode;a.grep(b.options.formFields,function(a){e=e&&d.tagName!=a}),e&&c.preventDefault()};this.defaultOptions.onBeforeScrollStart=c},g.prototype.pullToRefresh=function(){if(null==this.options||"function"!=typeof this.options.pullUpAction&&"function"!=typeof this.options.pullDownAction)return!1;var a=this;b=a.$el.find('[data-featured-scrollview="pullDown"]'),c=b&&b[0].offsetHeight,d=a.$el.find('[data-featured-scrollview="pullUp"]'),e=d&&d[0].offsetHeight;var f=c,g=function(){b=a.$el.find('[data-featured-scrollview="pullDown"]'),c=b&&b[0].offsetHeight,d=a.$el.find('[data-featured-scrollview="pullUp"]'),e=d&&d[0].offsetHeight,b&&b.attr("class").match("loading")?b.removeClass("flip loading"):d&&d.attr("class").match("loading")&&d.removeClass("flip loading")},h=function(){b=a.$el.find('[data-featured-scrollview="pullDown"]'),c=b&&b[0].offsetHeight,d=a.$el.find('[data-featured-scrollview="pullUp"]'),e=d&&d[0].offsetHeight,this.y>5&&b&&!b.attr("class").match("flip")?(b.addClass("flip"),this.minScrollY=0):this.y<5&&b&&b.attr("class").match("flip")?(b.removeClass("flip loading"),this.minScrollY=-c):this.y<this.maxScrollY-5&&d&&!d.attr("class").match("flip")?(d.addClass("flip"),this.maxScrollY=this.maxScrollY):this.y>this.maxScrollY+5&&d&&d.attr("class").match("flip")&&(d.removeClass("flip loading"),this.maxScrollY=e)},i=function(){console.log(3),b=a.$el.find('[data-featured-scrollview="pullDown"]'),c=b&&b[0].offsetHeight,d=a.$el.find('[data-featured-scrollview="pullUp"]'),e=d&&d[0].offsetHeight,b&&b.attr("class").match("flip")?(b.addClass("loading"),a.options.pullDownAction()):b&&d.attr("class").match("flip")&&(d.addClass("loading"),a.options.pullUpAction())};this.defaultOptions.topOffset=f,this.defaultOptions.onRefresh=g,this.defaultOptions.onScrollMove=h,this.defaultOptions.onScrollEnd=i},a.fn[f]=function(b){return this.each(function(){var c=a(this),d=c.data(f);d||c.data(f,d=new g(this,b)),"string"==typeof b&&d[b](d.options)})},a(function(){a("[data-featured=scrollView]").each(function(){a(this)[f]()})})});